const _0x3f5c8c=_0x50b0;(function(_0xaca9a5,_0x773f73){const _0x51348b=_0x50b0,_0x31c005=_0xaca9a5();while(!![]){try{const _0x3445a8=-parseInt(_0x51348b(0x122))/0x1*(-parseInt(_0x51348b(0x14c))/0x2)+parseInt(_0x51348b(0x13a))/0x3+-parseInt(_0x51348b(0x116))/0x4*(parseInt(_0x51348b(0xf7))/0x5)+parseInt(_0x51348b(0x112))/0x6+-parseInt(_0x51348b(0x121))/0x7+parseInt(_0x51348b(0x12f))/0x8+parseInt(_0x51348b(0x124))/0x9;if(_0x3445a8===_0x773f73)break;else _0x31c005['push'](_0x31c005['shift']());}catch(_0x251f16){_0x31c005['push'](_0x31c005['shift']());}}}(_0x29d7,0x98216));let currentUser=null,currentUserData=null;document[_0x3f5c8c(0x130)]('DOMContentLoaded',()=>{const _0x344bb7=_0x3f5c8c;auth[_0x344bb7(0x137)](async _0x306b8c=>{const _0x308c7c=_0x344bb7;currentUser=_0x306b8c;if(_0x306b8c)try{const _0x48a497=await database[_0x308c7c(0x13f)](_0x308c7c(0xf5)+_0x306b8c[_0x308c7c(0x10f)])[_0x308c7c(0x128)](_0x308c7c(0xef));currentUserData=_0x48a497[_0x308c7c(0xfc)](),updateUserInfoDisplay();}catch(_0x56f822){console['error']('Error\x20fetching\x20user\x20data:',_0x56f822);}else currentUserData=null,!window['location']['pathname'][_0x308c7c(0x14b)](_0x308c7c(0xf6))&&(window['location']['href']=_0x308c7c(0xf6));});});function requireAuth(_0x262678=null){return new Promise((_0x46344c,_0x477196)=>{const _0x2bff7f=_0x50b0;auth[_0x2bff7f(0x137)](async _0x172925=>{const _0x1b6ea7=_0x2bff7f;if(!_0x172925){window[_0x1b6ea7(0x115)][_0x1b6ea7(0x120)]=_0x1b6ea7(0xf6),_0x477196(_0x1b6ea7(0x12e));return;}try{const _0x25104a=await database[_0x1b6ea7(0x13f)](_0x1b6ea7(0xf5)+_0x172925[_0x1b6ea7(0x10f)])[_0x1b6ea7(0x128)]('value'),_0xbd32e9=_0x25104a[_0x1b6ea7(0xfc)]();if(!_0xbd32e9){await auth[_0x1b6ea7(0x13b)](),window[_0x1b6ea7(0x115)]['href']=_0x1b6ea7(0xf6),_0x477196(_0x1b6ea7(0xfb));return;}if(_0x262678&&_0xbd32e9['role']!==_0x262678){if(_0xbd32e9['role']===_0x1b6ea7(0x114))window['location'][_0x1b6ea7(0x120)]=_0x1b6ea7(0x14d);else _0xbd32e9[_0x1b6ea7(0x138)]==='subadmin'?window[_0x1b6ea7(0x115)]['href']='sub-admin.html':(await auth[_0x1b6ea7(0x13b)](),window['location'][_0x1b6ea7(0x120)]=_0x1b6ea7(0xf6));_0x477196(_0x1b6ea7(0x11d));return;}currentUser=_0x172925,currentUserData=_0xbd32e9,_0x46344c({'user':_0x172925,'userData':_0xbd32e9});}catch(_0x26fd61){console['error'](_0x1b6ea7(0x123),_0x26fd61),await auth['signOut'](),window['location'][_0x1b6ea7(0x120)]='login.html',_0x477196(_0x26fd61);}});});}function _0x29d7(){const _0x5b72de=['User\x20not\x20authenticated','1484960tRvQpD','addEventListener','transferBalance','querySelectorAll','[data-user-email]','Are\x20you\x20sure\x20you\x20want\x20to\x20sign\x20out?','/balance','body','onAuthStateChanged','role','email','317706mwlPLt','signOut','fa-info-circle','bg-blue-500\x20text-white','formatCurrency','ref','key','closest','format','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','error','Error\x20getting\x20user\x20balance:','fa-check-circle','createUserInDatabase','USD','completed','en-US','includes','291866laOZTT','admin-dashboard.html','name','Logout\x20error:','matches','target','database','value','toLocaleDateString','push','createElement','[data-user-role]','warning','users/','login.html','142315LcmAFX','preventDefault','[data-logout]','fa-exclamation-circle','User\x20data\x20not\x20found','val','Error\x20transferring\x20balance:','accounts/','/updatedAt','<i\x20class=\x22fas\x20fa-sign-out-alt\x20mr-2\x22></i>Logout','Error\x20signing\x20out:\x20','transactions/','short','[data-user-name]','appendChild','update','numeric','forEach','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>Signing\x20out...','Balance\x20transfer','message','Error\x20creating\x20user\x20in\x20database:','TIMESTAMP','parentElement','uid','showNotification','transactions','4766472mnchuv','currency','admin','location','116KMgJVY','div','fa-exclamation-triangle','Insufficient\x20balance','Error\x20updating\x20user\x20balance:','innerHTML','fixed\x20top-4\x20right-4\x20p-4\x20rounded-lg\x20shadow-lg\x20z-50\x20','Insufficient\x20permissions','ServerValue','info','href','7354004docmEp','3nHnpZL','Error\x20checking\x20authentication:','8778528iNsRkX','bg-yellow-500\x20text-white','requireAuth','textContent','once','NumberFormat','N/A','formatDate','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22ml-4\x20text-white\x20hover:text-gray-200\x22\x20onclick=\x22this.parentElement.parentElement.remove()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','bg-red-500\x20text-white'];_0x29d7=function(){return _0x5b72de;};return _0x29d7();}async function logout(){const _0x553dc5=_0x3f5c8c;try{const _0xdef47d=document['querySelector'](_0x553dc5(0xf9));_0xdef47d&&(_0xdef47d[_0x553dc5(0x11b)]=_0x553dc5(0x109),_0xdef47d['disabled']=!![]),await auth[_0x553dc5(0x13b)](),currentUser=null,currentUserData=null,window['location'][_0x553dc5(0x120)]=_0x553dc5(0xf6);}catch(_0x5ef5fc){console[_0x553dc5(0x144)](_0x553dc5(0xeb),_0x5ef5fc),alert(_0x553dc5(0x101)+_0x5ef5fc[_0x553dc5(0x10b)]),logoutBtn&&(logoutBtn[_0x553dc5(0x11b)]=_0x553dc5(0x100),logoutBtn['disabled']=![]);}}function updateUserInfoDisplay(){const _0x39c39b=_0x3f5c8c;if(!currentUserData)return;const _0x5eec25=document[_0x39c39b(0x132)](_0x39c39b(0x104));_0x5eec25[_0x39c39b(0x108)](_0x1db88a=>{const _0x1c6200=_0x39c39b;_0x1db88a[_0x1c6200(0x127)]=currentUserData[_0x1c6200(0x14e)]||currentUserData[_0x1c6200(0x139)];});const _0x14149d=document[_0x39c39b(0x132)](_0x39c39b(0x133));_0x14149d[_0x39c39b(0x108)](_0x1a9581=>{const _0x16ec53=_0x39c39b;_0x1a9581[_0x16ec53(0x127)]=currentUserData[_0x16ec53(0x139)];});const _0x381426=document[_0x39c39b(0x132)](_0x39c39b(0xf3));_0x381426[_0x39c39b(0x108)](_0x3a352e=>{const _0x225f35=_0x39c39b;_0x3a352e['textContent']=currentUserData['role']===_0x225f35(0x114)?'Administrator':'Sub-Administrator';});}async function createUserInDatabase(_0x580399,_0x3d7ff0){const _0x206c35=_0x3f5c8c;try{return await database[_0x206c35(0x13f)](_0x206c35(0xf5)+_0x580399)['set']({..._0x3d7ff0,'createdAt':firebase[_0x206c35(0xee)]['ServerValue'][_0x206c35(0x10d)],'status':'active'}),await database[_0x206c35(0x13f)](_0x206c35(0xfe)+_0x580399)['set']({'balance':0x0,'totalReceived':0x0,'totalSpent':0x0,'totalTransferred':0x0,'updatedAt':firebase['database']['ServerValue'][_0x206c35(0x10d)]}),!![];}catch(_0xcc3edc){console['error'](_0x206c35(0x10c),_0xcc3edc);throw _0xcc3edc;}}async function updateUserBalance(_0x2647e5,_0xa68a38,_0x225f90=null){const _0x13ccfa=_0x3f5c8c;try{const _0x449262=await getUserBalance(_0x2647e5),_0x36b8fb={['accounts/'+_0x2647e5+_0x13ccfa(0x135)]:_0xa68a38,[_0x13ccfa(0xfe)+_0x2647e5+_0x13ccfa(0xff)]:firebase[_0x13ccfa(0xee)][_0x13ccfa(0x11e)]['TIMESTAMP']};if(_0x225f90){const _0x2de2a2=database[_0x13ccfa(0x13f)](_0x13ccfa(0x111))[_0x13ccfa(0xf1)]()[_0x13ccfa(0x140)];_0x36b8fb['transactions/'+_0x2de2a2]={..._0x225f90,'previousBalance':_0x449262,'newBalance':_0xa68a38,'timestamp':firebase[_0x13ccfa(0xee)][_0x13ccfa(0x11e)]['TIMESTAMP'],'reference':_0x2de2a2};}return await database[_0x13ccfa(0x13f)]()[_0x13ccfa(0x106)](_0x36b8fb),!![];}catch(_0x319381){console[_0x13ccfa(0x144)](_0x13ccfa(0x11a),_0x319381);throw _0x319381;}}function _0x50b0(_0x4a3b23,_0x59ff39){const _0x29d7c0=_0x29d7();return _0x50b0=function(_0x50b0ba,_0x2cc8fc){_0x50b0ba=_0x50b0ba-0xeb;let _0x519ad0=_0x29d7c0[_0x50b0ba];return _0x519ad0;},_0x50b0(_0x4a3b23,_0x59ff39);}async function transferBalance(_0x30a57f,_0x36c2c9,_0x1dc7d7,_0x4902e4=''){const _0x5ba699=_0x3f5c8c;try{const _0x5e73b2=await getUserBalance(_0x30a57f),_0x59b9ed=await getUserBalance(_0x36c2c9);if(_0x5e73b2<_0x1dc7d7)throw new Error(_0x5ba699(0x119));const _0x1c20b7=_0x5e73b2-_0x1dc7d7,_0x4639e2=_0x59b9ed+_0x1dc7d7,_0x54a0ed={'type':'transfer','fromUserId':_0x30a57f,'toUserId':_0x36c2c9,'amount':_0x1dc7d7,'description':_0x4902e4||_0x5ba699(0x10a),'status':_0x5ba699(0x149),'timestamp':firebase[_0x5ba699(0xee)][_0x5ba699(0x11e)][_0x5ba699(0x10d)]},_0x12b43c={[_0x5ba699(0xfe)+_0x30a57f+_0x5ba699(0x135)]:_0x1c20b7,[_0x5ba699(0xfe)+_0x36c2c9+_0x5ba699(0x135)]:_0x4639e2,[_0x5ba699(0xfe)+_0x30a57f+'/updatedAt']:firebase[_0x5ba699(0xee)]['ServerValue']['TIMESTAMP'],['accounts/'+_0x36c2c9+_0x5ba699(0xff)]:firebase[_0x5ba699(0xee)][_0x5ba699(0x11e)][_0x5ba699(0x10d)]},_0x79534f=database['ref'](_0x5ba699(0x111))['push']()[_0x5ba699(0x140)];return _0x12b43c[_0x5ba699(0x102)+_0x79534f]={..._0x54a0ed,'fromPreviousBalance':_0x5e73b2,'fromNewBalance':_0x1c20b7,'toPreviousBalance':_0x59b9ed,'toNewBalance':_0x4639e2,'reference':_0x79534f},await database[_0x5ba699(0x13f)]()[_0x5ba699(0x106)](_0x12b43c),{'transactionId':_0x79534f,'newFromBalance':_0x1c20b7,'newToBalance':_0x4639e2};}catch(_0x2e1751){console[_0x5ba699(0x144)](_0x5ba699(0xfd),_0x2e1751);throw _0x2e1751;}}async function getUserBalance(_0x428d02){const _0x2dff7d=_0x3f5c8c;try{const _0x49c695=await database[_0x2dff7d(0x13f)](_0x2dff7d(0xfe)+_0x428d02+_0x2dff7d(0x135))['once']('value');return _0x49c695[_0x2dff7d(0xfc)]()||0x0;}catch(_0x5a0a5c){return console[_0x2dff7d(0x144)](_0x2dff7d(0x145),_0x5a0a5c),0x0;}}function formatCurrency(_0x23b53d){const _0x422cf7=_0x3f5c8c;return new Intl[(_0x422cf7(0x129))]('en-US',{'style':_0x422cf7(0x113),'currency':_0x422cf7(0x148)})[_0x422cf7(0x142)](_0x23b53d);}function formatDate(_0x17df85){const _0x545195=_0x3f5c8c;if(!_0x17df85)return _0x545195(0x12a);const _0x397a3b=new Date(_0x17df85);return _0x397a3b[_0x545195(0xf0)](_0x545195(0x14a),{'year':_0x545195(0x107),'month':_0x545195(0x103),'day':_0x545195(0x107),'hour':'2-digit','minute':'2-digit'});}function showNotification(_0x47974a,_0x4e3020=_0x3f5c8c(0x11f)){const _0x8099c2=_0x3f5c8c,_0x54d6b0=document[_0x8099c2(0xf2)](_0x8099c2(0x117));_0x54d6b0['className']=_0x8099c2(0x11c)+(_0x4e3020==='success'?'bg-green-500\x20text-white':_0x4e3020===_0x8099c2(0x144)?_0x8099c2(0x12d):_0x4e3020===_0x8099c2(0xf4)?_0x8099c2(0x125):_0x8099c2(0x13d)),_0x54d6b0['innerHTML']=_0x8099c2(0x143)+(_0x4e3020==='success'?_0x8099c2(0x146):_0x4e3020===_0x8099c2(0x144)?_0x8099c2(0xfa):_0x4e3020==='warning'?_0x8099c2(0x118):_0x8099c2(0x13c))+'\x20mr-2\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x47974a+_0x8099c2(0x12c),document[_0x8099c2(0x136)][_0x8099c2(0x105)](_0x54d6b0),setTimeout(()=>{const _0x2cdb2c=_0x8099c2;_0x54d6b0[_0x2cdb2c(0x10e)]&&_0x54d6b0['remove']();},0x1388);}document[_0x3f5c8c(0x130)]('click',_0x132333=>{const _0x47c4d5=_0x3f5c8c;(_0x132333[_0x47c4d5(0xed)][_0x47c4d5(0xec)](_0x47c4d5(0xf9))||_0x132333[_0x47c4d5(0xed)][_0x47c4d5(0x141)](_0x47c4d5(0xf9)))&&(_0x132333[_0x47c4d5(0xf8)](),confirm(_0x47c4d5(0x134))&&logout());}),window[_0x3f5c8c(0x126)]=requireAuth,window['logout']=logout,window[_0x3f5c8c(0x147)]=createUserInDatabase,window['updateUserBalance']=updateUserBalance,window[_0x3f5c8c(0x131)]=transferBalance,window['getUserBalance']=getUserBalance,window[_0x3f5c8c(0x13e)]=formatCurrency,window[_0x3f5c8c(0x12b)]=formatDate,window[_0x3f5c8c(0x110)]=showNotification;
