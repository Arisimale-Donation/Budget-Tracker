const _0x1ae386=_0x1dd8;(function(_0x227c2c,_0x3f5c08){const _0x487fcb=_0x1dd8,_0x4224fe=_0x227c2c();while(!![]){try{const _0x2350ea=parseInt(_0x487fcb(0xd3))/0x1+parseInt(_0x487fcb(0xe2))/0x2+-parseInt(_0x487fcb(0x96))/0x3*(-parseInt(_0x487fcb(0xad))/0x4)+parseInt(_0x487fcb(0x88))/0x5*(parseInt(_0x487fcb(0xc1))/0x6)+parseInt(_0x487fcb(0x8b))/0x7*(-parseInt(_0x487fcb(0xca))/0x8)+parseInt(_0x487fcb(0xcc))/0x9*(parseInt(_0x487fcb(0x84))/0xa)+-parseInt(_0x487fcb(0xb0))/0xb;if(_0x2350ea===_0x3f5c08)break;else _0x4224fe['push'](_0x4224fe['shift']());}catch(_0x45512e){_0x4224fe['push'](_0x4224fe['shift']());}}}(_0x23d8,0x76cee));let currentUser=null,currentUserData=null;document[_0x1ae386(0xb7)](_0x1ae386(0xa4),()=>{auth['onAuthStateChanged'](async _0x4d8860=>{const _0x5dda18=_0x1dd8;currentUser=_0x4d8860;if(_0x4d8860)try{const _0x2d755a=await database[_0x5dda18(0xab)](_0x5dda18(0xd6)+_0x4d8860['uid'])[_0x5dda18(0x9a)](_0x5dda18(0xb1));currentUserData=_0x2d755a[_0x5dda18(0xb5)](),updateUserInfoDisplay();}catch(_0x33aea4){console['error'](_0x5dda18(0xe5),_0x33aea4);}else currentUserData=null,!window[_0x5dda18(0xa5)][_0x5dda18(0xe7)]['includes']('login.html')&&(window['location'][_0x5dda18(0xdc)]=_0x5dda18(0x87));});});function requireAuth(_0x2c9db2=null){return new Promise((_0x488a29,_0x1fee23)=>{auth['onAuthStateChanged'](async _0x751cc8=>{const _0xf69904=_0x1dd8;if(!_0x751cc8){window['location'][_0xf69904(0xdc)]=_0xf69904(0x87),_0x1fee23(_0xf69904(0xe6));return;}try{const _0x24f157=await database['ref'](_0xf69904(0xd6)+_0x751cc8[_0xf69904(0xbb)])[_0xf69904(0x9a)]('value'),_0x1f2669=_0x24f157['val']();if(!_0x1f2669){await auth['signOut'](),window['location'][_0xf69904(0xdc)]=_0xf69904(0x87),_0x1fee23(_0xf69904(0xa8));return;}if(_0x2c9db2&&_0x1f2669[_0xf69904(0xde)]!==_0x2c9db2){if(_0x1f2669['role']==='admin')window[_0xf69904(0xa5)]['href']=_0xf69904(0x8a);else _0x1f2669['role']===_0xf69904(0xe8)?window[_0xf69904(0xa5)][_0xf69904(0xdc)]=_0xf69904(0x93):(await auth[_0xf69904(0xdd)](),window[_0xf69904(0xa5)]['href']=_0xf69904(0x87));_0x1fee23('Insufficient\x20permissions');return;}currentUser=_0x751cc8,currentUserData=_0x1f2669,_0x488a29({'user':_0x751cc8,'userData':_0x1f2669});}catch(_0x56300b){console[_0xf69904(0x9f)](_0xf69904(0xa3),_0x56300b),await auth[_0xf69904(0xdd)](),window[_0xf69904(0xa5)][_0xf69904(0xdc)]=_0xf69904(0x87),_0x1fee23(_0x56300b);}});});}async function logout(){const _0x394c8d=_0x1ae386;try{const _0x1c7a24=document[_0x394c8d(0xa9)](_0x394c8d(0xac));_0x1c7a24&&(_0x1c7a24['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>Signing\x20out...',_0x1c7a24[_0x394c8d(0xc2)]=!![]),await auth['signOut'](),currentUser=null,currentUserData=null,window['location'][_0x394c8d(0xdc)]=_0x394c8d(0x87);}catch(_0x32e938){console[_0x394c8d(0x9f)]('Logout\x20error:',_0x32e938),alert(_0x394c8d(0xc8)+_0x32e938[_0x394c8d(0xd2)]),logoutBtn&&(logoutBtn[_0x394c8d(0x89)]='<i\x20class=\x22fas\x20fa-sign-out-alt\x20mr-2\x22></i>Logout',logoutBtn[_0x394c8d(0xc2)]=![]);}}function updateUserInfoDisplay(){const _0xa7af8d=_0x1ae386;if(!currentUserData)return;const _0x9d3dc8=document[_0xa7af8d(0xb6)]('[data-user-name]');_0x9d3dc8['forEach'](_0x172cdd=>{const _0x5e8a6f=_0xa7af8d;_0x172cdd['textContent']=currentUserData[_0x5e8a6f(0xb4)]||currentUserData[_0x5e8a6f(0x94)];});const _0x39bbb8=document[_0xa7af8d(0xb6)](_0xa7af8d(0xe3));_0x39bbb8[_0xa7af8d(0xc0)](_0x4352fa=>{const _0x564f9d=_0xa7af8d;_0x4352fa[_0x564f9d(0xd1)]=currentUserData[_0x564f9d(0x94)];});const _0x1d9961=document[_0xa7af8d(0xb6)](_0xa7af8d(0x92));_0x1d9961[_0xa7af8d(0xc0)](_0x3ee8a0=>{const _0x20389b=_0xa7af8d;_0x3ee8a0[_0x20389b(0xd1)]=currentUserData[_0x20389b(0xde)]===_0x20389b(0xb9)?'Administrator':'Sub-Administrator';});}async function createUserInDatabase(_0x51cc29,_0x56f626){const _0x489a6c=_0x1ae386;try{return await database[_0x489a6c(0xab)](_0x489a6c(0xd6)+_0x51cc29)[_0x489a6c(0x8f)]({..._0x56f626,'createdAt':firebase['database'][_0x489a6c(0xcd)]['TIMESTAMP'],'status':_0x489a6c(0xc5)}),await database[_0x489a6c(0xab)](_0x489a6c(0xd7)+_0x51cc29)['set']({'balance':0x0,'totalReceived':0x0,'totalSpent':0x0,'totalTransferred':0x0,'updatedAt':firebase['database'][_0x489a6c(0xcd)][_0x489a6c(0xeb)]}),!![];}catch(_0x58a4a7){console['error'](_0x489a6c(0x8e),_0x58a4a7);throw _0x58a4a7;}}function _0x1dd8(_0x113289,_0x5eb862){const _0x23d8d3=_0x23d8();return _0x1dd8=function(_0x1dd809,_0x4387d8){_0x1dd809=_0x1dd809-0x84;let _0x2f3ce2=_0x23d8d3[_0x1dd809];return _0x2f3ce2;},_0x1dd8(_0x113289,_0x5eb862);}async function updateUserBalance(_0x571523,_0x11b2ba,_0x2c20d6=null){const _0x54b6cb=_0x1ae386;try{const _0x29b359=await getUserBalance(_0x571523),_0x55c719={[_0x54b6cb(0xd7)+_0x571523+_0x54b6cb(0xc9)]:_0x11b2ba,[_0x54b6cb(0xd7)+_0x571523+_0x54b6cb(0xea)]:firebase[_0x54b6cb(0xa7)][_0x54b6cb(0xcd)][_0x54b6cb(0xeb)]};if(_0x2c20d6){const _0x3ca69d=database[_0x54b6cb(0xab)](_0x54b6cb(0xdb))[_0x54b6cb(0xba)]()[_0x54b6cb(0xe0)];_0x55c719[_0x54b6cb(0xa1)+_0x3ca69d]={..._0x2c20d6,'previousBalance':_0x29b359,'newBalance':_0x11b2ba,'timestamp':firebase['database']['ServerValue']['TIMESTAMP'],'reference':_0x3ca69d};}return await database[_0x54b6cb(0xab)]()[_0x54b6cb(0xc3)](_0x55c719),!![];}catch(_0x3df6a7){console[_0x54b6cb(0x9f)](_0x54b6cb(0x90),_0x3df6a7);throw _0x3df6a7;}}async function transferBalance(_0x28e510,_0x2f736e,_0x32e203,_0x5b6aa4=''){const _0x1d0ec1=_0x1ae386;try{const _0x2d1c12=await getUserBalance(_0x28e510),_0x2ed168=await getUserBalance(_0x2f736e);if(_0x2d1c12<_0x32e203)throw new Error(_0x1d0ec1(0xbc));const _0x41ad5d=_0x2d1c12-_0x32e203,_0x1f37d1=_0x2ed168+_0x32e203,_0x4719f1={'type':_0x1d0ec1(0xda),'fromUserId':_0x28e510,'toUserId':_0x2f736e,'amount':_0x32e203,'description':_0x5b6aa4||'Balance\x20transfer','status':_0x1d0ec1(0xc4),'timestamp':firebase[_0x1d0ec1(0xa7)][_0x1d0ec1(0xcd)]['TIMESTAMP']},_0x2646fe={['accounts/'+_0x28e510+_0x1d0ec1(0xc9)]:_0x41ad5d,[_0x1d0ec1(0xd7)+_0x2f736e+_0x1d0ec1(0xc9)]:_0x1f37d1,['accounts/'+_0x28e510+_0x1d0ec1(0xea)]:firebase[_0x1d0ec1(0xa7)][_0x1d0ec1(0xcd)][_0x1d0ec1(0xeb)],[_0x1d0ec1(0xd7)+_0x2f736e+_0x1d0ec1(0xea)]:firebase['database'][_0x1d0ec1(0xcd)][_0x1d0ec1(0xeb)]},_0x57c2d7=database[_0x1d0ec1(0xab)]('transactions')[_0x1d0ec1(0xba)]()[_0x1d0ec1(0xe0)];return _0x2646fe['transactions/'+_0x57c2d7]={..._0x4719f1,'fromPreviousBalance':_0x2d1c12,'fromNewBalance':_0x41ad5d,'toPreviousBalance':_0x2ed168,'toNewBalance':_0x1f37d1,'reference':_0x57c2d7},await database[_0x1d0ec1(0xab)]()[_0x1d0ec1(0xc3)](_0x2646fe),{'transactionId':_0x57c2d7,'newFromBalance':_0x41ad5d,'newToBalance':_0x1f37d1};}catch(_0x310e7f){console[_0x1d0ec1(0x9f)]('Error\x20transferring\x20balance:',_0x310e7f);throw _0x310e7f;}}async function getUserBalance(_0x133315){const _0xf5696f=_0x1ae386;try{const _0x4ec2ed=await database[_0xf5696f(0xab)](_0xf5696f(0xd7)+_0x133315+_0xf5696f(0xc9))[_0xf5696f(0x9a)](_0xf5696f(0xb1));return _0x4ec2ed[_0xf5696f(0xb5)]()||0x0;}catch(_0x2f6ad2){return console[_0xf5696f(0x9f)](_0xf5696f(0xcb),_0x2f6ad2),0x0;}}function formatCurrency(_0x5e2cff){const _0x537bd4=_0x1ae386;return new Intl['NumberFormat']('en-US',{'style':_0x537bd4(0xe1),'currency':_0x537bd4(0x9b)})['format'](_0x5e2cff);}function formatDate(_0x980b84){const _0x2de4bc=_0x1ae386;if(!_0x980b84)return _0x2de4bc(0x85);const _0x1aca2e=new Date(_0x980b84);return _0x1aca2e[_0x2de4bc(0xa2)](_0x2de4bc(0x99),{'year':'numeric','month':_0x2de4bc(0x98),'day':'numeric','hour':_0x2de4bc(0x91),'minute':_0x2de4bc(0x91)});}function _0x23d8(){const _0x34ee73=['completed','active','click','bg-yellow-500\x20text-white','Error\x20signing\x20out:\x20','/balance','8BzGbfL','Error\x20getting\x20user\x20balance:','8604nbJtzM','ServerValue','getUserBalance','div','remove','textContent','message','229472cezuqy','formatCurrency','parentElement','users/','accounts/','showNotification','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','transfer','transactions','href','signOut','role','warning','key','currency','1417252TkaEfF','[data-user-email]','fa-exclamation-triangle','Error\x20fetching\x20user\x20data:','User\x20not\x20authenticated','pathname','subadmin','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22ml-4\x20text-white\x20hover:text-gray-200\x22\x20onclick=\x22this.parentElement.parentElement.remove()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','/updatedAt','TIMESTAMP','380wcuzuu','N/A','success','login.html','35YIchVG','innerHTML','admin-dashboard.html','282275lvjkKW','info','bg-blue-500\x20text-white','Error\x20creating\x20user\x20in\x20database:','set','Error\x20updating\x20user\x20balance:','2-digit','[data-user-role]','sub-admin.html','email','createUserInDatabase','942DZsKuQ','createElement','short','en-US','once','USD','appendChild','updateUserBalance','formatDate','error','matches','transactions/','toLocaleDateString','Error\x20checking\x20authentication:','DOMContentLoaded','location','Are\x20you\x20sure\x20you\x20want\x20to\x20sign\x20out?','database','User\x20data\x20not\x20found','querySelector','preventDefault','ref','[data-logout]','6652lrTwvp','fa-exclamation-circle','body','19780046JmMlIh','value','bg-red-500\x20text-white','transferBalance','name','val','querySelectorAll','addEventListener','fa-check-circle','admin','push','uid','Insufficient\x20balance','fixed\x20top-4\x20right-4\x20p-4\x20rounded-lg\x20shadow-lg\x20z-50\x20','target','closest','forEach','710178qzoPAF','disabled','update'];_0x23d8=function(){return _0x34ee73;};return _0x23d8();}function showNotification(_0x3a2822,_0x3fa375=_0x1ae386(0x8c)){const _0x25c4cb=_0x1ae386,_0x126cb2=document[_0x25c4cb(0x97)](_0x25c4cb(0xcf));_0x126cb2['className']=_0x25c4cb(0xbd)+(_0x3fa375===_0x25c4cb(0x86)?'bg-green-500\x20text-white':_0x3fa375===_0x25c4cb(0x9f)?_0x25c4cb(0xb2):_0x3fa375===_0x25c4cb(0xdf)?_0x25c4cb(0xc7):_0x25c4cb(0x8d)),_0x126cb2['innerHTML']=_0x25c4cb(0xd9)+(_0x3fa375===_0x25c4cb(0x86)?_0x25c4cb(0xb8):_0x3fa375==='error'?_0x25c4cb(0xae):_0x3fa375===_0x25c4cb(0xdf)?_0x25c4cb(0xe4):'fa-info-circle')+'\x20mr-2\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3a2822+_0x25c4cb(0xe9),document[_0x25c4cb(0xaf)][_0x25c4cb(0x9c)](_0x126cb2),setTimeout(()=>{const _0x295bc8=_0x25c4cb;_0x126cb2[_0x295bc8(0xd5)]&&_0x126cb2[_0x295bc8(0xd0)]();},0x1388);}document['addEventListener'](_0x1ae386(0xc6),_0x387e15=>{const _0x4aa37c=_0x1ae386;(_0x387e15[_0x4aa37c(0xbe)][_0x4aa37c(0xa0)]('[data-logout]')||_0x387e15[_0x4aa37c(0xbe)][_0x4aa37c(0xbf)](_0x4aa37c(0xac)))&&(_0x387e15[_0x4aa37c(0xaa)](),confirm(_0x4aa37c(0xa6))&&logout());}),window['requireAuth']=requireAuth,window['logout']=logout,window[_0x1ae386(0x95)]=createUserInDatabase,window[_0x1ae386(0x9d)]=updateUserBalance,window[_0x1ae386(0xb3)]=transferBalance,window[_0x1ae386(0xce)]=getUserBalance,window[_0x1ae386(0xd4)]=formatCurrency,window[_0x1ae386(0x9e)]=formatDate,window[_0x1ae386(0xd8)]=showNotification;
